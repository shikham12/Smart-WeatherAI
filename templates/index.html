{% extends "base.html" %}
{% block content %}
<section class="hero p-5 rounded-4 shadow-sm mb-4 bg-white">
    <div class="row align-items-center">
        <div class="col-md-8">
            <h1 class="display-5 fw-bold">SmartWeatherAI</h1>
            <p class="lead text-muted">Ask weather-specific questions, get forecasts, packing suggestions, and travel
                advice tailored to a location and date range.</p>
            <a class="btn btn-primary btn-lg shadow-sm" href="{{ url_for('create') }}" role="button">Create Weather
                Query</a>
        </div>
        <div class="col-md-4 text-md-end mt-4 mt-md-0">
            <img src="https://cdn.jsdelivr.net/gh/feathericons/feather@latest/icons/cloud.svg" alt="cloud"
                style="width:86px;opacity:.85">
        </div>
    </div>
</section>

<div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">Recent Weather Queries</h3>
    <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('create') }}"><i class="bi bi-plus"></i> New</a>
</div>

{% if records %}
<div class="row g-3">
    {% for r in records %}
    <div class="col-12 col-md-6">
        <div class="card h-100 shadow-sm">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <div>
                        <h5 class="card-title mb-1">{{ r.resolved_name }}</h5>
                        <p class="mb-1 text-muted small">{{ "%.4f"|format(r.lat) }}, {{ "%.4f"|format(r.lon) }}</p>
                        <p class="mb-2">{{ r.user_input }}</p>
                    </div>
                    <div class="text-end small text-muted">
                        <div>{{ r.created_at.strftime('%Y-%m-%d') }}</div>
                        <div>{{ r.created_at.strftime('%H:%M') }}</div>
                    </div>
                </div>
                <div class="mt-3 d-flex gap-2">
                    <a class="btn btn-sm btn-outline-primary" href="{{ url_for('view', id=r.id) }}">View</a>
                    <a class="btn btn-sm btn-outline-warning" href="{{ url_for('edit', id=r.id) }}">Edit</a>
                    <form style="display:inline" method="post" action="{{ url_for('delete', id=r.id) }}"
                        onsubmit="return confirm('Delete this weather record?')">
                        <button class="btn btn-sm btn-outline-danger" type="submit">Delete</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="text-center p-5 bg-white rounded shadow-sm">
    <i class="bi bi-cloud fs-1 text-muted"></i>
    <h5 class="text-muted mt-3">No weather queries yet</h5>
    <p class="text-muted">Create your first weather query to get started.</p>
    <a class="btn btn-primary" href="{{ url_for('create') }}">Get Started</a>
</div>
{% endif %}

{% endblock %}